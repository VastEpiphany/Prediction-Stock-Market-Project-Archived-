#交易策略
##恒生指数的实际交易规则
[交易规则](https://licai.cofool.com/ask/qa_3286299.html)

交易规则比较自由，基本上对交易策略没有影响，我们的项目不用考虑。


##交易策略制定
五分钟线模型：用来生成交易信号
日线模型：预测变化趋势

###五分钟模型生成交易信号的具体策略

#### 1. **生成交易信号**

- **买入信号**：如果模型预测未来5分钟内指数将上涨，且预期上涨幅度超过某个阈值（例如0.05%），则生成买入信号。
- **卖出信号**：如果模型预测未来5分钟内指数将下跌，且预期下跌幅度超过同样的阈值，则生成卖出信号。

#### 2. **决定交易规模**

- **固定规模**：每次交易投入固定金额，如每次交易10,000元。
- **动态规模（我们应该不用这个）**：根据模型的预测信心或预期收益率调整规模。例如，如果模型对预测非常有信心，可以增加交易规模，反之则减少。

#### 3. **设置止损和止盈**

- **止损点**：为每笔交易设置止损点，当交易亏损达到投入资金的1%时自动卖出。
- **止盈点**：同样，可以设置止盈点，当交易盈利达到投入资金的2%时自动卖出。

###日线模型预测整体趋势

1. **使用预测模型预测未来的指数值**：预测未来几天或几周的日均指数值。

2. **计算移动平均线**：
   - 使用这些预测值来计算短期和长期移动平均线（如20天和50天SMA）。
   - 这样，移动平均线将包含实际的历史数据和模型预测的未来数据。

3. **趋势分析**：
   - 如果预测的短期SMA高于长期SMA，可能表示未来市场为多头趋势。
   - 如果预测的短期SMA低于长期SMA，可能表示未来市场为空头趋势。



假设我们有一个DataFrame `df`，它包含历史数据和预测数据。

```python
import pandas as pd

# 示例历史和预测数据
data = {
    'Date': ['2023-01-01', '2023-01-02', '2023-01-03', '2023-01-04', '2023-01-05', '2023-01-06', '2023-01-07'],  # 日期
    'Predicted_Close': [100, 102, 101, 103, 104, 105, 106]  # 预测的收盘价
}

df = pd.DataFrame(data)
df['Date'] = pd.to_datetime(df['Date'])
df.set_index('Date', inplace=True)

# 计算移动平均线
short_window = 3  # 短期窗口，例如3天
long_window = 5  # 长期窗口，例如5天

df['SMA_Short'] = df['Predicted_Close'].rolling(window=short_window, min_periods=1).mean()
df['SMA_Long'] = df['Predicted_Close'].rolling(window=long_window, min_periods=1).mean()

# 确定趋势
df['Trend'] = 'Neutral'
df.loc[df['SMA_Short'] > df['SMA_Long'], 'Trend'] = 'Bullish'
df.loc[df['SMA_Short'] < df['SMA_Long'], 'Trend'] = 'Bearish'

print(df)
```

###两个模型如何交互-总体交易策略

我们现在有两个模型：
- **日线模型**：预测恒生指数的长期趋势。
- **5分钟模型**：预测恒生指数在接下来5分钟内的价格走势。

#### 1. **确定长期市场趋势（日线模型）**

- **多头市场**：如果日线模型显示上升趋势，我们将主要寻找买入机会。
- **空头市场**：如果日线模型显示下降趋势，我们将主要寻找卖出机会。

#### 2. **日内交易信号（5分钟模型）**

- **买入信号**：在多头市场，当5分钟模型预测接下来的5分钟内价格将上涨时，产生买入信号。
- **卖出信号**：在空头市场，当5分钟模型预测接下来的5分钟内价格将下跌时，产生卖出信号。

#### 3. **交易执行**

- **入场策略**：当出现与长期趋势一致的日内买入/卖出信号时，执行交易。
  - 例如，在多头市场，当5分钟模型发出买入信号时，立即买入。
- **交易规模**：根据信号强度和账户风险管理规则确定交易规模。（我们暂时采用固定的交易规模，每次交易10,000元）
- **止损和止盈**：为每笔交易设置止损和止盈点。设置止损点为入场价格的1%，止盈点为2%。
